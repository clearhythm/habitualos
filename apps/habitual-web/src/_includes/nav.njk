<nav class="navbar">
  <div class="w-100 sidemenu">
    <div id="sidemenu-toggle" class="toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <div class="sidemenu-main">
      <div class="sidemenu-left">
        <ul>
          <li><h3><a href="/">Home</a></h3></li>
          <li>
            <h3><a href="/practice/">Practice</a></h3>
            <ul class="nav-secondary">
              <li><a href="/practice/chat/">Motivate</a></li>
              <li><a href="/practice/log/">Log Practice</a></li>
              <li><a href="/practice/history/">History</a></li>
              <li><a href="/practice/garden/">Garden</a></li>
            </ul>
          </li>
          <li>
            <h3><a href="/do/">Do</a></h3>
            <ul class="nav-secondary">
              <li><a href="/do/chat/">Explore</a></li>
              <li><a href="/do/log/">Log Work</a></li>
              <li><a href="/do/actions/">Actions</a></li>
              <li><a href="/do/projects/">Projects</a></li>
              <li><a href="/do/agents/">Agents</a></li>
            </ul>
          </li>
        </ul>
        <footer>
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
            <span id="theme-text">Dark Mode</span>
            <span class="theme-icon" id="theme-icon">ðŸŒ™</span>
          </button>
          <p id="nav-auth" style="color: #fff; font-size: 0.9rem; padding: 1rem; opacity: 0.7; margin-top: 1rem;">HabitualOS</p>
          <script type="module">
            import { isSignedIn, getFriendlyName } from "/assets/js/auth/auth.js";
            const el = document.getElementById("nav-auth");
            if (isSignedIn()) {
              const name = getFriendlyName();
              el.innerHTML = `${name} Â· <a href="/signout/" style="color: #fff; text-decoration: underline;">Sign out</a>`;
            } else {
              el.innerHTML = `<a href="/signin/" style="color: #fff; text-decoration: underline;">Sign in</a>`;
            }
          </script>
        </footer>
      </div>
      <div class="sidemenu-right">
        <div class="sidemenu-overlay"></div>
      </div>
    </div>
  </div>

  <div class="mx-auto">
    {% if page.url.startsWith('/practice/') %}
      <a class="navbar-brand" href="/practice/">{{ navtitle | default("HabitualOS") }}</a>
    {% elif page.url.startsWith('/do/') %}
      <a class="navbar-brand" href="/do/">{{ navtitle | default("HabitualOS") }}</a>
    {% else %}
      <a class="navbar-brand" href="/">{{ navtitle | default("HabitualOS") }}</a>
    {% endif %}
  </div>
</nav>
